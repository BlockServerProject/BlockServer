<?xml version="1.0" encoding="UTF-8"?>
<!--
OLD FILE!!!
This is the default log4j2 XML configuration for BlockServer.
You can edit this file only if you know what you are doing.
If you are looking for the debug options, look at the comments below in the file.
-->
<Configuration status="WARN" packages="org.blockserver.utils">
	<Appenders>
		<Console name="BSSysOut" target="SYSTEM_OUT">
			<PatternLayout pattern="[%d{HH:mm:ss}] [%level] [%logger]: %msg%n" />
		</Console>
		<Console name="SysOut" target="SYSTEM_OUT">
			<PatternLayout pattern="[%d{HH:mm:ss}] [%level]: %msg%n" />
		</Console>
		<RollingRandomAccessFile name="File" fileName="logs/latest.log" filePattern="logs/%d{yyyy-MM-dd}-%i.log.gz">
			<PatternLayout pattern="[%d{HH:mm:ss}] [%level]: %msg%n" />
			<Policies>
				<TimeBasedTriggeringPolicy />
				<OnStartupTriggeringPolicy />
			</Policies>
		</RollingRandomAccessFile>
		<Routing name="BSFile">
			<Routes pattern="$${ctx:side}">
				<Route>
					<RollingRandomAccessFile name="BSFile" fileName="logs/bs-${ctx:side}-latest.log" filePattern="logs/bs-${ctx:side}-%i.log">
						<PatternLayout pattern="[%d{HH:mm:ss}] [%level] [%logger/%X{mod}]: %msg%n" />
						<DefaultRolloverStrategy max="3" fileIndex="max" />
						<Policies>
							<OnStartupTriggeringPolicy />
						</Policies>
					</RollingRandomAccessFile>
				</Route>
				<!--
				<Route key="$${ctx:side}">
					<RandomAccessFile name="BSFile" fileName="logs/bs-junk-earlystartup.log" >
						<PatternLayout pattern="[%d{HH:mm:ss}] [%level] [%logger]: %msg%n" />
					</RandomAccessFile>
				</Route>
				-->
			</Routes>
		</Routing>
	</Appenders>
	<Loggers>
		<Logger level="info" name="Server" additivity="false">
			<AppenderRef ref="SysOut" level="INFO" /> <!-- Switch this to DEBUG for debug output -->
			<AppenderRef ref="File" />
		</Logger>
		<Root level="all">
			<AppenderRef ref="BSSysOut" level="INFO" /> <!-- Switch this to DEBUG for debug output -->
			<AppenderRef ref="BSFile"/>
		</Root>
	</Loggers>
</Configuration>
